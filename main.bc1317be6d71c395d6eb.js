(()=>{"use strict";var e,n={46:(e,n,t)=>{var i=t(294),a=t(745),r=t(743),s=t(942),o=t(268),l=t(848),c=t(673),u=(0,l.LC)({reducerPath:"baseApi",baseQuery:(0,c.ni)({baseUrl:"https://hookb.in/eK160jgYJ6UlaRPldJ1P"}),endpoints:function(){return{}}}),d={carCost:{min:1e6,max:6e6},initialDeposit:{min:1e5,max:6e6},percentDeposit:{min:10,max:60},months:{min:1,max:60}},p=(0,o.oM)({name:"calc",initialState:{carCost:33e5,initialDeposit:495e3,months:60,dealSum:7241940,monthlyPayment:112449,percentDeposit:15,rate:.035},reducers:{change:function(e,n){var t=n.payload,i=t.name,a=t.value;"string"==typeof a&&(a=a.replace(/\D/g,"")),(+a||""===a)&&(e[i]=+a,"initialDeposit"===i&&(e.percentDeposit=100*Math.round(e.initialDeposit/e.carCost)),"percentDeposit"===i&&(e.initialDeposit=Math.round(e.percentDeposit/100*e.carCost)))},validate:function(e,n){var t=n.payload,i=t.name,a=t.value;if("string"==typeof a&&(a=a.replace(/\D/g,"")),0==+a&&(e[i]=1),+a&&(+a<d[i].min&&(e[i]=d[i].min),+a>d[i].max&&(e[i]=d[i].max),+a>d[i].min&&+a<d[i].max&&(e[i]=+a)),"initialDeposit"===i){var r=Math.round(e.carCost*d.percentDeposit.min/100),s=Math.round(e.carCost*d.percentDeposit.max/100);+a&&(+a<r&&(e[i]=r),+a>s&&(e[i]=s))}},calculate:function(e,n){var t=n.payload.name;"carCost"===t&&(e.initialDeposit=Math.round(e.percentDeposit/100*e.carCost)),"initialDeposit"===t&&(e.percentDeposit=Math.round(e.initialDeposit/e.carCost*100)),"percentDeposit"===t&&(e.initialDeposit=Math.round(e.percentDeposit/100*e.carCost)),e.monthlyPayment=Math.round((e.carCost-e.initialDeposit)*(e.rate*Math.pow(1+e.rate,e.months)/(Math.pow(1+e.rate,e.months)-1))),e.dealSum=Math.round(e.initialDeposit+e.months*e.monthlyPayment)}}}),m=p.actions,v=m.calculate,f=m.validate,h=m.change;const x=p.reducer;var g,D=(0,o.xC)({reducer:(g={},(0,s.Z)(g,u.reducerPath,u.reducer),(0,s.Z)(g,"calc",x),g),middleware:function(e){return e().concat(u.middleware)}}),j=t(861),b=t(152),y=t(687),C=t.n(y),w=u.injectEndpoints({endpoints:function(e){return{submitLeasingForm:e.mutation({query:function(e){return{url:"",method:"POST",body:e,headers:{"content-type":"application/json"}}}})}},overrideExisting:!1}).useSubmitLeasingFormMutation,_=function(){return(0,r.I0)()},N=r.v9,S=t(893);const M=function(e){var n=e.caption,t=e.value;return(0,S.jsxs)("div",{className:"info-field",children:[(0,S.jsx)("div",{className:"info-field__caption",children:n}),(0,S.jsxs)("div",{className:"info-field__value",children:[(String(t).slice(-9,-6)+" "+String(t).slice(-6,-3)+" "+String(t).slice(-3)).trim()," ",(0,S.jsx)("span",{className:"ruble-char",children:"₽"})]})]})},O=function(e){var n=e.children,t=e.name,a=e.caption,r=e.value,s=e.isDisabled,o=(0,i.useRef)(null),l=(0,i.useRef)(null),c=(0,i.useState)(0),u=(0,b.Z)(c,2),p=u[0],m=u[1],x=(0,i.useState)(0),g=(0,b.Z)(x,2),D=g[0],j=g[1],y=N((function(e){return e.calc.carCost})),C=function(){var e=(0,i.useState)(0),n=(0,b.Z)(e,2),t=n[0],a=n[1];return(0,i.useEffect)((function(){function e(){a(window.innerWidth)}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),t}(),w=_(),M=(r-d[t].min)/(d[t].max-d[t].min);if("initialDeposit"===t){var O=N((function(e){return e.calc.percentDeposit}));M=(O-d.percentDeposit.min)/(d.percentDeposit.max-d.percentDeposit.min)}return(0,i.useLayoutEffect)((function(){var e,n;null!==(e=o.current)&&void 0!==e&&e.offsetWidth&&m(Math.round((null===(n=o.current)||void 0===n?void 0:n.offsetWidth)*M))}),[C]),(0,i.useEffect)((function(){null!==l.current&&(l.current.selectionStart=D,l.current.selectionEnd=D)}),[D]),(0,S.jsxs)("div",{className:"input-field ".concat(s?"disabled":""),children:[(0,S.jsx)("label",{className:"input-field__label",htmlFor:t,children:(0,S.jsx)("span",{children:a})}),(0,S.jsxs)("div",{className:"input-field-container",children:[(0,S.jsx)("input",{className:"input-field-container__input",ref:l,type:"text",value:(String(r).slice(-9,-6)+" "+String(r).slice(-6,-3)+" "+String(r).slice(-3)).trim(),onChange:function(e){var n=e.target,t=n.name,i=n.value,a=n.selectionStart;a&&j(a),w(h({name:t,value:i}))},onBlur:function(e){var n=e.target,t=n.name,i=n.value;w(f({name:t,value:i})),w(v({name:t,value:i}))},name:t,disabled:s}),(0,S.jsxs)("div",{className:"input-field-range",ref:o,children:[(0,S.jsx)("div",{className:"input-field-range__line",style:{width:p}}),(0,S.jsx)("div",{className:"input-field-range__circle",style:{left:p},draggable:!0,onDrag:function(e){var n,i=null===(n=o.current)||void 0===n?void 0:n.getBoundingClientRect();if(i&&e.pageX-i.x>=0&&e.pageX-i.x<=i.width+1)if("initialDeposit"===t){var a=Math.floor(((e.pageX-i.x)/i.width*(d.percentDeposit.max-d.percentDeposit.min)+d.percentDeposit.min)/100*y);w(h({name:t,value:a})),w(v({name:t,value:a})),m(e.pageX-i.x)}else{var r=Math.floor((e.pageX-i.x)/i.width*(d[t].max-d[t].min)+d[t].min);w(h({name:t,value:r})),w(v({name:t,value:r})),m(e.pageX-i.x)}}})]}),(0,S.jsx)("div",{className:"input-field-container__extension",children:n})]})]})},P=function(e){var n=e.value,t=e.name,i=e.isDisabled,a=_();return(0,S.jsx)("div",{className:"percent-deposit ".concat(i?"disabled":""),children:(0,S.jsx)("input",{className:"percent-deposit__input",type:"text",onChange:function(e){var n=e.target,t=n.name,i=n.value;a(h({name:t,value:i}))},onBlur:function(e){var n=e.target,t=n.name,i=n.value;a(f({name:t,value:i})),a(v({name:t,value:i}))},name:t,value:n+"%",disabled:i})})},k=function(){return(0,S.jsx)("div",{className:"loader",children:(0,S.jsx)("svg",{width:"30",height:"30",viewBox:"0 0 21 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,S.jsx)("path",{d:"M13.8691 19.3825C11.9455 20.1121 9.83718 20.1976 7.86093 19.6261C5.88468 19.0546 4.14734 17.857 2.91009 16.2134C1.67285 14.5698 1.00256 12.569 1.00001 10.5118C0.99745 8.45459 1.66276 6.45212 2.89591 4.80546C4.12906 3.15879 5.86342 1.95691 7.83825 1.38051C9.81307 0.804109 11.9216 0.88433 13.847 1.60911C15.7723 2.3339 17.4103 3.66408 18.5148 5.39968C19.6193 7.13528 20.1305 9.18251 19.9716 11.2336",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})})})},E=function(e){var n=e.value,t=e.isLoading,i=e.isDisabled;return(0,S.jsx)("button",{className:"button submit-button",type:"submit",disabled:i,children:t?(0,S.jsx)(k,{}):n})},L=function(){var e=N((function(e){return e.calc})),n=w(),t=(0,b.Z)(n,2),i=t[0],a=t[1].isLoading,r=function(){var n=(0,j.Z)(C().mark((function n(t){return C().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),n.next=3,i(JSON.stringify(e));case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return(0,S.jsxs)("div",{className:"leasing-form",children:[(0,S.jsx)("h1",{className:"leasing-form__caption",children:"Рассчитайте стоимость автомобиля в лизинг"}),(0,S.jsxs)("form",{onSubmit:r,children:[(0,S.jsxs)("div",{className:"leasing-form__inputs",children:[(0,S.jsx)(O,{caption:"Стоимость автомобиля",name:"carCost",value:e.carCost,isDisabled:a,children:"₽"}),(0,S.jsx)(O,{caption:"Первоначальный взнос",name:"initialDeposit",value:e.initialDeposit,isDisabled:a,children:(0,S.jsx)(P,{name:"percentDeposit",value:e.percentDeposit,isDisabled:a})}),(0,S.jsx)(O,{caption:"Срок лизинга",name:"months",value:e.months,isDisabled:a,children:"мес."})]}),(0,S.jsxs)("div",{className:"leasing-form__infos",children:[(0,S.jsx)(M,{caption:"Сумма договора лизинга",value:e.dealSum}),(0,S.jsx)(M,{caption:"Ежемесячный платеж от",value:e.monthlyPayment}),(0,S.jsx)(E,{isDisabled:a,isLoading:a,value:"Оставить заявку"})]})]})]})},Z=function(){return(0,S.jsx)("main",{className:"main",children:(0,S.jsx)(L,{})})};var X=document.getElementById("root");(0,a.s)(X).render((0,S.jsx)(r.zt,{store:D,children:(0,S.jsx)(Z,{})}))}},t={};function i(e){var a=t[e];if(void 0!==a)return a.exports;var r=t[e]={exports:{}};return n[e](r,r.exports,i),r.exports}i.m=n,e=[],i.O=(n,t,a,r)=>{if(!t){var s=1/0;for(u=0;u<e.length;u++){for(var[t,a,r]=e[u],o=!0,l=0;l<t.length;l++)(!1&r||s>=r)&&Object.keys(i.O).every((e=>i.O[e](t[l])))?t.splice(l--,1):(o=!1,r<s&&(s=r));if(o){e.splice(u--,1);var c=a();void 0!==c&&(n=c)}}return n}r=r||0;for(var u=e.length;u>0&&e[u-1][2]>r;u--)e[u]=e[u-1];e[u]=[t,a,r]},i.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return i.d(n,{a:n}),n},i.d=(e,n)=>{for(var t in n)i.o(n,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},i.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={179:0};i.O.j=n=>0===e[n];var n=(n,t)=>{var a,r,[s,o,l]=t,c=0;if(s.some((n=>0!==e[n]))){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(l)var u=l(i)}for(n&&n(t);c<s.length;c++)r=s[c],i.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return i.O(u)},t=self.webpackChunklising_calc=self.webpackChunklising_calc||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var a=i.O(void 0,[15],(()=>i(46)));a=i.O(a)})();